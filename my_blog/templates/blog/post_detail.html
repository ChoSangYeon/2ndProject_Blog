{% extends 'base.html' %}

{% block content %}
{% load static %}

<section class="site-section">
    <div class="container">
        <div>
            <a href="{% url 'blog:post_list' %}">목록</a>
            {% if user == post.author %}
            <a href="{% url 'blog:post_edit' post.pk %}">수정</a>
            <a href="{% url 'blog:post_delete' post.pk %}">삭제</a>
            {% endif %}
        </div>
        
        <hr>
        
        <div>
            <p>조회수 : {{post.view_count}}</p>
            <p>카테고리: {{post.category}}</p>
            <p>게시물 업로드 시간: {{post.updated_at}}</p>
            <p>게시물 제목: {{post.title}}</p>
            {% if post.thumb_image %}
                <img src="{{ post.thumb_image.url }}" alt="Post Image">
            {% endif %}
            <p>게시물 내용: {{post.content}}</p>
            <p>태그: {{post.tag}}</p>
            {% if post.file_upload %}
            <video src="{{post.file_upload.url}}" controls></video>
            {% endif %}
        </div>
        
        <hr>

        <div>
            <h3>댓글</h3>
            {% for comment in post.comments.all %}
                <p>댓글: {{comment.message}}</p>
                <p>작성자: {{comment.author}}</p>
                <p>작성 시간: {{comment.updated_at}}</p>
            {% endfor %}
        </div>
        
        <hr>

        <div>
            <h3>댓글 작성</h3>
            <form action="{% url 'blog:comment_new' post.pk %}" method="post">
                {% csrf_token %}
                {{ comment_form.as_p }}
                <input type="submit" value="댓글 작성">
            </form>
        </div>
    </div>
</section>

{% endblock %}